---
// molecules/ProjectCard.astro VERSIÓN COMPACTA
import CardBase from "../atoms/CardBase.astro";
import ButtonBase from "../atoms/ButtonBase.astro";

const {
  title,
  description,
  image,
  link,
  repo,
  techStack = [],
  featured = false,
} = Astro.props;

const techColors = {
  ".NET": "from-indigo-500 to-purple-600",
  "C#": "from-indigo-600 to-purple-700",
  Flutter: "from-blue-400 to-cyan-500",
  React: "from-cyan-500 to-blue-500",
  Azure: "from-blue-600 to-blue-800",
  SQL: "from-blue-500 to-cyan-500",
  Python: "from-yellow-300 to-blue-500",
  FastAPI: "from-green-500 to-teal-600",
  MongoDB: "from-green-500 to-green-700",
  Firebase: "from-yellow-400 to-orange-500",
};
---

<!-- ALTERNATIVA: ProjectCard más compacta -->
<div
  class={`bg-neutral-800 rounded-2xl overflow-hidden group transform transition-all duration-300 hover:scale-[1.02] hover:shadow-xl hover:shadow-indigo-500/10 ${featured ? "ring-2 ring-indigo-500/50" : ""}`}
>
  <!-- Image Container más compacta -->
  <div class="relative overflow-hidden">
    <img
      loading="lazy"
      src={image}
      alt={title}
      class="w-full h-48 object-cover transition-all duration-300 group-hover:scale-105"
    />

    <!-- Gradient Overlay -->
    <div
      class="absolute inset-0 bg-gradient-to-t from-neutral-900/60 via-transparent to-transparent"
    >
    </div>

    <!-- Featured Badge -->
    {
      featured && (
        <div class="absolute top-3 left-3 px-2 py-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full text-xs font-bold text-black">
          ⭐ Destacado
        </div>
      )
    }

    <!-- Tech Stack más pequeño -->
    {
      techStack && techStack.length > 0 && (
        <div class="absolute bottom-3 left-3 right-3">
          <div class="flex flex-wrap gap-1">
            {techStack.slice(0, 3).map((tech: string) => (
              <span
                class={`px-2 py-0.5 text-xs font-medium rounded bg-gradient-to-r ${techColors[tech as keyof typeof techColors] || "from-gray-500 to-gray-600"} text-white`}
              >
                {tech}
              </span>
            ))}
            {techStack.length > 3 && (
              <span class="px-2 py-0.5 text-xs font-medium rounded bg-neutral-800/80 text-neutral-300">
                +{techStack.length - 3}
              </span>
            )}
          </div>
        </div>
      )
    }
  </div>

  <!-- Content más compacto -->
  <div class="p-5 space-y-3">
    <!-- Title -->
    <div class="space-y-1">
      <h3
        class="text-lg font-bold text-white group-hover:text-indigo-400 transition-colors"
      >
        {title}
      </h3>
      <div
        class="w-8 h-0.5 bg-gradient-to-r from-indigo-500 to-purple-600 group-hover:w-16 transition-all duration-300"
      >
      </div>
    </div>

    <!-- Description más corta -->
    <p class="text-sm text-neutral-300 leading-relaxed line-clamp-2">
      {description}
    </p>

    <!-- Actions compactas -->
    <div class="flex justify-between items-center pt-3">
      {
        repo && (
          <a
            href={repo}
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center space-x-1 text-neutral-400 hover:text-indigo-400 text-sm transition-colors"
          >
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z"
                clip-rule="evenodd"
              />
            </svg>
            <span>Código</span>
          </a>
        )
      }

      {
        link && (
          <a href={link} class="cursor-pointer">
            <button class="px-4 py-2 text-sm font-medium text-white rounded-lg bg-gradient-to-r from-cyan-400 to-indigo-500 hover:from-cyan-300 hover:to-indigo-400 transition-all duration-200 flex items-center space-x-1">
              <span>Ver Proyecto</span>
              <svg
                class="w-3 h-3"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </button>
          </a>
        )
      }
    </div>
  </div>
</div>
